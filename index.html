<!DOCTYPE html>
<html>

<head>
    <meta charset="Big5">
    <title>阻抗並聯</title>
</head>

<body>
    R:<input id='R' value='0'> X:<input id='X' value='0'>
    <button onclick='f1()'>輸入</button>


    <p id='ans'>Z=</p>

    <script>
        var zx, zy, inx, iny;

        function f1() {
            inx = document.getElementById("R").value;
            iny = document.getElementById("X").value;

            //運算
            if (typeof zx == 'undefined') {
                zx = inx;
                zy = iny;
            } else {
                var mulx = zx * inx - zy * iny,
                    muly = zy * inx + zx * iny,
                    addx = zx * 1 + inx * 1,
                    addy = zy * 1 + iny * 1;
                var A = addx * addx + addy * addy;
                zx = (mulx * addx + muly * addy) / A;
                zy = (muly * addx - mulx * addy) / A;
            }

            //顯示
            var text = 'Z=';
            //坐標
            if (zy > 0)
                text += zx + '+j' + zy + 'Ω';
            else if (zy < 0)
                text += zx + '-j' + zy * -1 + 'Ω';
            else
                text += zx + 'Ω';
            //向量
            if (zy != 0) {
                text += '<br>=' + Math.sqrt(zx * zx + zy * zy) + '∠' + Math.atan2(zy, zx) * 180 / Math.PI + '°';
            }
            document.getElementById("ans").innerHTML = text;
            return;
        }
    </script>
</body>

</html>